pragma solidity 0.8.19;

import "forge-std/Test.sol";
import "src/NaughtCoin.sol";
import "src/Exploit.sol";

contract ExploitTest is Test {
   function test_exploit() public {
       NaughtCoin nc = new NaughtCoin(address(this));
       uint256 balance = nc.balanceOf(address(this));
       assert(balance > 0);

       Exploit e = new Exploit();
       nc.approve(address(e), type(uint256).max);
       e.exploit(address(nc));

       balance = nc.balanceOf(address(this));
       assertEq(balance, 0);
   }
}
